<mxGraphModel dx="5314" dy="3497" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="none" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="DtyXQ3PAwa8L_bhxuvus-283" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="920" y="1024" width="840" height="710" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-267" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="920" y="804" width="840" height="210" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-264" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="921" y="280" width="840" height="514" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-2" target="DtyXQ3PAwa8L_bhxuvus-4" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-2" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;span class=&quot;YPkS7KbdpWfGdYKd3QB9&quot; data-src-align=&quot;0:10&quot; style=&quot;&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;YPkS7KbdpWfGdYKd3QB9&quot; data-src-align=&quot;0:10&quot; style=&quot;white-space-collapse: preserve;&quot;&gt;ransaction&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;" parent="1" vertex="1"><mxGeometry x="297.77" y="-270" width="215.49" height="50" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-4" target="DtyXQ3PAwa8L_bhxuvus-5" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-221" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-4" target="DtyXQ3PAwa8L_bhxuvus-28" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-4" value="&lt;b&gt;Postmaster&lt;/b&gt;&lt;br&gt;&lt;div&gt;(main process)&lt;/div&gt;&lt;div&gt;Primary&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a0522d;fontColor=#ffffff;strokeColor=#6D1F00;fontSize=22;" parent="1" vertex="1"><mxGeometry x="297.77" y="-110" width="215.49" height="100" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-8" value="Create sub proc's" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="310" y="85" width="60" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-9" value="Checkpointer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="160" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-27" value="Create (sub proc).&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;При первом запуске&lt;/span&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;rotation=0;" parent="1" vertex="1"><mxGeometry x="180" y="50" width="277.5" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-28" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;shared memory&lt;/b&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1"><mxGeometry x="270" y="120" width="270" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-30" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1"><mxGeometry x="270" y="160" width="270" height="850" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-48" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;shared_buffers&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1"><mxGeometry x="290" y="180" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-50" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;ProcArray&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1"><mxGeometry x="290" y="290" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-52" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;wal_buffers&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1"><mxGeometry x="290" y="234" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-53" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Shared Predicate Locks&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290.18" y="775" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-54" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;CLOG buffers&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;strokeColor=#b46504;align=center;verticalAlign=middle;fontFamily=Helvetica;fontColor=default;fillColor=#fad7ac;" parent="1" vertex="1"><mxGeometry x="290" y="428" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-55" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;XLogCtl&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290.18" y="590" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-56" value="" style="endArrow=none;dashed=1;html=1;strokeWidth=2;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashPattern=1 4;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-4" target="DtyXQ3PAwa8L_bhxuvus-4" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="80" y="120" as="sourcePoint"/><mxPoint x="130" y="70" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-63" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;User Space&lt;/font&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="-111.16999999999999" y="-130" width="190" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-68" value="Весь обмен информацией с БД через процесс &quot;backend&quot;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;rotation=0;" parent="1" vertex="1"><mxGeometry x="871.5" y="-50" width="320" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-78" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-270" y="1344" width="2350" height="1720" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="DtyXQ3PAwa8L_bhxuvus-78" vertex="1"><mxGeometry x="-300" y="-14" width="1400" height="1734" as="geometry"/></mxCell><UserObject label="# Основной каталог данных кластера (PGDATA), где хранятся все пользовательские и системные данные&#10;/var/lib/postgresql&#10;    └── 18                  # Версия PostgreSQL&#10;            └── main      # Имя кластера&#10;                ├── base            # Каталоги с данными пользовательских баз данных (по одному подкаталогу на OID базы)&#10;                │   ├── 1            # Служебная БД template1 (OID=1)&#10;                │   │   ├── 112        # Файл таблицы или индекса (RELFILENODE = 112)&#10;                │   │   ├── 1247_fsm        # Free Space Map — карта свободного места для страниц файла 1247&#10;                │   │   ├── 1247_vm            # Visibility Map — битовая карта видимости для страниц файла 1247&#10;                │   │   ├── pg_filenode.map    # Отображение RELFILENODE ↔ OID для нестандартных имён файлов&#10;                │   │   ├── pg_internal.init    # Кэш системных каталогов для ускорения запуска&#10;                │   │   └── PG_VERSION        # Версия формата данных (совпадает с версией PostgreSQL)&#10;                │   ├── 4            # Служебная БД postgres (OID=4, может отличаться)&#10;                │   └── 5            # Пользовательская БД (например, ваша БД с OID=5)&#10;                ├── global        # Глобальные системные таблицы, общие для всего кластера&#10;                │   ├── 2396        # Файл глобальной системной таблицы (например, pg_database)&#10;                │   ├── 2396_fsm    # FSM для глобальной таблицы&#10;                │   ├── 2396_vm        # VM для глобальной таблицы&#10;                │   ├── pg_control    # Ключевой файл: метаданные кластера, LSN последнего checkpoint’а, состояние&#10;                │   ├── pg_filenode.map        # Отображение для глобальных отношений&#10;                │   └── pg_internal.init    # Кэш глобальных каталогов&#10;                ├── pg_commit_ts    # Хранилище временных меток коммитов (если включено track_commit_timestamp)&#10;                ├── pg_dynshmem        # Файлы разделяемой памяти для динамических библиотек (например, расширений)&#10;                ├── pg_logical        # Данные для логической декодировки и логической репликации&#10;                │   ├── mappings    # Отображения между XID и LSN для логической репликации&#10;                │   ├── replorigin_checkpoint    # Точка восстановления для origin’ов репликации&#10;                │   └── snapshots    # Сохранённые снимки (snapshots) для логической репликации&#10;                ├── pg_multixact    # Информация о мультитранзакциях (для совместных блокировок SHARE/KEY SHARE)&#10;                │   ├── members        # Списки участников мультитранзакций&#10;                │   └── offsets        # Смещения мультитранзакций&#10;                ├── pg_notify        # Очереди LISTEN/NOTIFY&#10;                ├── pg_replslot        # Слоты репликации (физические и логические) — предотвращают удаление нужного WAL&#10;                ├── pg_serial        # Данные для сериализуемой изоляции (отслеживание конфликтов)&#10;                ├── pg_snapshots    # Сохранённые снимки (через pg_export_snapshot)&#10;                ├── pg_stat            # Постоянные файлы статистики (начиная с PG 14 — вместо pg_stat_tmp)&#10;                ├── pg_stat_tmp        # Временные файлы статистики (в PG ≤13)&#10;                ├── pg_subtrans        # Информация о вложенных (sub) транзакциях&#10;                ├── pg_tblspc        # Символические ссылки на табличные пространства (если они созданы)&#10;                ├── pg_twophase        # Состояния двухфазных транзакций (PREPARE TRANSACTION)&#10;                ├── PG_VERSION        # Версия формата данных кластера (дублирует base/*/PG_VERSION)&#10;                ├── pg_wal            # Write-Ahead Log — журнал транзакций (по 16 МБ на файл)&#10;                │   ├── 000000010000000000000001    # WAL-файл&#10;                │   ├── archive_status                # Флаги архивации (.ready, .done)&#10;                │   └── summaries    # Сводные данные WAL для быстрого поиска (начиная с PG 17)&#10;                ├── pg_xact            # Commit Log (CLOG) — статусы транзакций (Committed/Aborted)&#10;                │   └── 0000        # Сегмент CLOG&#10;                ├── postgresql.auto.conf    # Файл для ALTER SYSTEM — автоматически управляемый конфиг&#10;                ├── postmaster.opts    # Аргументы командной строки, с которыми был запущен postmaster&#10;                └── postmaster.pid    # PID главного процесса и информация о сокете (существует только при запущенном кластере)&#10;При репликации добавляются:&#10;                ├── standby.signal    # обычный пустой файл (0 байт) # Его наличие указывает PostgreSQL: «Запускайся в режиме standby (восстановления), а не как обычный primary»." link="```sh&#10;# Основной каталог данных кластера (PGDATA), где хранятся все пользовательские и системные данные&#10;/var/lib/postgresql&#10;|    # Версия PostgreSQL&#10;    └── 18&#10;        |    # Имя кластера&#10;            └── main&#10;                ├── base            # Каталоги с данными пользовательских баз данных (по одному подкаталогу на OID базы)&#10;                │   ├── 1            # Служебная БД template1 (OID=1)&#10;                │   │   ├── 112        # Файл таблицы или индекса (RELFILENODE = 112)&#10;                │   │   ├── 1247_fsm        # Free Space Map — карта свободного места для страниц файла 1247&#10;                │   │   ├── 1247_vm            # Visibility Map — битовая карта видимости для страниц файла 1247&#10;                │   │   ├── pg_filenode.map    # Отображение RELFILENODE ↔ OID для нестандартных имён файлов&#10;                │   │   ├── pg_internal.init    # Кэш системных каталогов для ускорения запуска&#10;                │   │   └── PG_VERSION        # Версия формата данных (совпадает с версией PostgreSQL)&#10;                │   ├── 4            # Служебная БД postgres (OID=4, может отличаться)&#10;                │   └── 5            # Пользовательская БД (например, ваша БД с OID=5)&#10;                ├── global        # Глобальные системные таблицы, общие для всего кластера&#10;                │   ├── 2396        # Файл глобальной системной таблицы (например, pg_database)&#10;                │   ├── 2396_fsm    # FSM для глобальной таблицы&#10;                │   ├── 2396_vm        # VM для глобальной таблицы&#10;                │   ├── pg_control    # Ключевой файл: метаданные кластера, LSN последнего checkpoint’а, состояние&#10;                │   ├── pg_filenode.map        # Отображение для глобальных отношений&#10;                │   └── pg_internal.init    # Кэш глобальных каталогов&#10;                ├── pg_commit_ts    # Хранилище временных меток коммитов (если включено track_commit_timestamp)&#10;                ├── pg_dynshmem        # Файлы разделяемой памяти для динамических библиотек (например, расширений)&#10;                ├── pg_logical        # Данные для логической декодировки и логической репликации&#10;                │   ├── mappings    # Отображения между XID и LSN для логической репликации&#10;                │   ├── replorigin_checkpoint    # Точка восстановления для origin’ов репликации&#10;                │   └── snapshots    # Сохранённые снимки (snapshots) для логической репликации&#10;                ├── pg_multixact    # Информация о мультитранзакциях (для совместных блокировок SHARE/KEY SHARE)&#10;                │   ├── members        # Списки участников мультитранзакций&#10;                │   └── offsets        # Смещения мультитранзакций&#10;                ├── pg_notify        # Очереди LISTEN/NOTIFY&#10;                ├── pg_replslot        # Слоты репликации (физические и логические) — предотвращают удаление нужного WAL&#10;                ├── pg_serial        # Данные для сериализуемой изоляции (отслеживание конфликтов)&#10;                ├── pg_snapshots    # Сохранённые снимки (через pg_export_snapshot)&#10;                ├── pg_stat            # Постоянные файлы статистики (начиная с PG 14 — вместо pg_stat_tmp)&#10;                ├── pg_stat_tmp        # Временные файлы статистики (в PG ≤13)&#10;                ├── pg_subtrans        # Информация о вложенных (sub) транзакциях&#10;                ├── pg_tblspc        # Символические ссылки на табличные пространства (если они созданы)&#10;                ├── pg_twophase        # Состояния двухфазных транзакций (PREPARE TRANSACTION)&#10;                ├── PG_VERSION        # Версия формата данных кластера (дублирует base/*/PG_VERSION)&#10;                ├── pg_wal            # Write-Ahead Log — журнал транзакций (по 16 МБ на файл)&#10;                │   ├── 000000010000000000000001    # WAL-файл&#10;                │   ├── archive_status                # Флаги архивации (.ready, .done)&#10;                │   └── summaries    # Сводные данные WAL для быстрого поиска (начиная с PG 17)&#10;                ├── pg_xact            # Commit Log (CLOG) — статусы транзакций (Committed/Aborted)&#10;                │   └── 0000        # Сегмент CLOG&#10;                ├── postgresql.auto.conf    # Файл для ALTER SYSTEM — автоматически управляемый конфиг&#10;                ├── postmaster.opts    # Аргументы командной строки, с которыми был запущен postmaster&#10;                └── postmaster.pid    # PID главного процесса и информация о сокете (существует только при запущенном кластере)&#10;```" id="GxawK6VliJsd9YzGtLEj-1"><mxCell style="text;whiteSpace=wrap;fontSize=16;" parent="DtyXQ3PAwa8L_bhxuvus-78" vertex="1"><mxGeometry x="-280" y="599.45" width="970" height="1050" as="geometry"/></mxCell></UserObject><mxCell id="GxawK6VliJsd9YzGtLEj-3" value="" style="group" parent="DtyXQ3PAwa8L_bhxuvus-78" vertex="1" connectable="0"><mxGeometry x="80" y="16" width="583.4482758620691" height="583.4482758620691" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-73" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="GxawK6VliJsd9YzGtLEj-3" vertex="1"><mxGeometry width="583.4482758620691" height="583.4482758620691" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-74" value="" style="sketch=0;verticalLabelPosition=bottom;sketch=0;aspect=fixed;html=1;verticalAlign=top;strokeColor=none;fillColor=#000000;align=center;outlineConnect=0;pointerEvents=1;shape=mxgraph.citrix2.site_database;" parent="GxawK6VliJsd9YzGtLEj-3" vertex="1"><mxGeometry x="60.00307692307693" y="110.00230769230768" width="285.261326259947" height="314.1644562334218" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-75" value="" style="sketch=0;verticalLabelPosition=bottom;sketch=0;aspect=fixed;html=1;verticalAlign=top;strokeColor=none;fillColor=#000000;align=center;outlineConnect=0;pointerEvents=1;shape=mxgraph.citrix2.site_database;" parent="GxawK6VliJsd9YzGtLEj-3" vertex="1"><mxGeometry x="356.0007692307689" y="226.42461538461566" width="179.52254641909815" height="197.74408488063662" as="geometry"/></mxCell><UserObject label="# Основной системный каталог с конфигурацией кластеров, управляемый пакетным менеджером (Debian/Ubuntu)&#10;/etc/postgresql&#10;     |    # Версия PostgreSQL (например, 18)&#10;    └── 18&#10;         |        # Имя кластера (по умолчанию — main); позволяет запускать несколько кластеров одной версии&#10;        └── main&#10;            ├── conf.d            # Каталог для подключения дополнительных .conf-файлов (автоматически включаются в postgresql.conf)&#10;            ├── environment        # Файл с переменными окружения, которые будут загружены при старте кластера (например, LC_COLLATE, locale)&#10;            ├── pg_ctl.conf        # Конфигурация для утилиты pg_ctl (редко используется в дистрибутивах на основе systemd)&#10;             |                        # Это **простой текстовый файл**, содержащий **аргументы командной строки**, которые будут **автоматически переданы `pg_ctl`** при вызове без явного указания параметров.&#10;            ├── pg_hba.conf        # Файл контроля доступа: определяет, кто и как может подключаться к кластеру (host, local, методы аутентификации)                                    &#10;            ├── pg_ident.conf    # Файл отображения имён ОС-пользователей в роли PostgreSQL (используется с методом auth «ident»)&#10;            ├── postgresql.conf    # Основной конфигурационный файл СУБД: все параметры сервера (память, WAL, репликация, логирование и т.д.)&#10;            └── start.conf        # Управление автозапуском кластера при загрузке ОС (значения: auto, manual, disabled)&#10;" link="```sh&#10;# Основной системный каталог с конфигурацией кластеров, управляемый пакетным менеджером (Debian/Ubuntu)&#10;/etc/postgresql&#10;|    # Версия PostgreSQL (например, 18)&#10;    └── 18&#10;    |        # Имя кластера (по умолчанию — main); позволяет запускать несколько кластеров одной версии&#10;        └── main&#10;            ├── conf.d            # Каталог для подключения дополнительных .conf-файлов (автоматически включаются в postgresql.conf)&#10;            ├── environment        # Файл с переменными окружения, которые будут загружены при старте кластера (например, LC_COLLATE, locale)&#10;            ├── pg_ctl.conf        # Конфигурация для утилиты pg_ctl (редко используется в дистрибутивах на основе systemd)&#10;            |                        # Это **простой текстовый файл**, содержащий **аргументы командной строки**, которые будут **автоматически переданы `pg_ctl`** при вызове без явного указания параметров.&#10;            ├── pg_hba.conf        # Файл контроля доступа: определяет, кто и как может подключаться к кластеру (host, local, методы аутентификации)                                    &#10;            ├── pg_ident.conf    # Файл отображения имён ОС-пользователей в роли PostgreSQL (используется с методом auth «ident»)&#10;            ├── postgresql.conf    # Основной конфигурационный файл СУБД: все параметры сервера (память, WAL, репликация, логирование и т.д.)&#10;            └── start.conf        # Управление автозапуском кластера при загрузке ОС (значения: auto, manual, disabled)&#10;```" id="GxawK6VliJsd9YzGtLEj-5"><mxCell style="text;whiteSpace=wrap;fontSize=17;" parent="DtyXQ3PAwa8L_bhxuvus-78" vertex="1"><mxGeometry x="690" y="410" width="1660" height="410" as="geometry"/></mxCell></UserObject><mxCell id="DtyXQ3PAwa8L_bhxuvus-284" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-80" target="DtyXQ3PAwa8L_bhxuvus-227" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-80" value="Select" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=22;" parent="1" vertex="1"><mxGeometry x="1241" y="160" width="160" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-337" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-81" target="DtyXQ3PAwa8L_bhxuvus-336" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-81" value="&lt;font&gt;Insert&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=22;" parent="1" vertex="1"><mxGeometry x="2710" y="160" width="160" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-287" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-82" target="DtyXQ3PAwa8L_bhxuvus-225" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-82" value="Update" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;fontSize=22;" parent="1" vertex="1"><mxGeometry x="2077" y="163" width="165" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-90" value="&lt;b&gt;PosgreSQL&lt;/b&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=80;" parent="1" vertex="1"><mxGeometry x="-1540" y="-740" width="550" height="180" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-97" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Replication Slot State&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontColor=default;fillColor=default;" parent="1" vertex="1"><mxGeometry x="290.18" y="658" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-98" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;AutoVacuumShmem&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;strokeColor=#b46504;align=center;verticalAlign=middle;fontFamily=Helvetica;fontColor=default;fillColor=#fad7ac;" parent="1" vertex="1"><mxGeometry x="290.18" y="715" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-99" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Two-phase commit state (PreparedXacts)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290.18" y="835" width="230" height="35" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-100" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="290" y="350" width="230" height="50" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-51" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Lock Manager&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="DtyXQ3PAwa8L_bhxuvus-100" vertex="1"><mxGeometry width="230" height="25" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-92" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;LOCK&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="DtyXQ3PAwa8L_bhxuvus-100" vertex="1"><mxGeometry y="25" width="92.00000000000001" height="25" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-95" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;PROCLOCK&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="DtyXQ3PAwa8L_bhxuvus-100" vertex="1"><mxGeometry x="92.00000000000001" y="25" width="138" height="25" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-102" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Subtrans buffers&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290.18" y="530" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-140" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-53" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="724.6270740323835" y="403.6399672012499" as="sourcePoint"/><mxPoint x="620" y="640" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-217" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-80" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-218" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-81" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-219" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-82" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-5" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;b&gt;backend&lt;/b&gt;&lt;br&gt;(subsidiary &lt;br&gt;process)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#647687;fontColor=#ffffff;strokeColor=#314354;" parent="1" vertex="1"><mxGeometry x="890" y="-20" width="283" height="100" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-116" value="&lt;span style=&quot;color: rgb(247, 248, 252); font-family: system-ui, ui-sans-serif, -apple-system, BlinkMacSystemFont, Inter, NotoSansHans, sans-serif; text-align: start; white-space-collapse: preserve-breaks; background-color: rgb(35, 35, 38);&quot;&gt;DML&lt;/span&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=16;" parent="1" vertex="1"><mxGeometry x="2760" y="-10" width="60" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-107" value="Полная инициализация postmaster'ом" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;rotation=-90;" parent="1" vertex="1"><mxGeometry x="140" y="257" width="240" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-10" value="WAL writer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="320" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-11" value="Background writer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="240" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-12" value="Autovacuum launcher" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="640" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-13" value="Syslogger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="560" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-343" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;curved=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-14" target="DtyXQ3PAwa8L_bhxuvus-73" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-580" y="420"/><mxPoint x="-580" y="1636"/></Array></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-14" value="WAL archiver" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="400" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-17" value="WAL sender" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-400" y="478" width="160" height="42" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-32" value="Stats collector" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-398" y="759" width="160" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-143" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;" parent="1" target="DtyXQ3PAwa8L_bhxuvus-55" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1030" y="80" as="sourcePoint"/><mxPoint x="559.9996228143747" y="559.9986486275907" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-150" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Buffer descriptors&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290" y="480" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-172" value="буфер для WAL-записей перед сбросом на диск" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="330" y="220" width="140" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-173" value="кэш страниц данных (по 8 КБ): таблицы, индексы, TOAST" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="320" y="166" width="170" height="12" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-174" value="критичен для производительности записи и durability" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="322.5" y="258" width="155" height="22" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-175" value="содержит по одной записи PGPROC на каждый backend + фоновые процессы" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="295" y="276" width="230" height="22" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-176" value="хэш-таблица LOCK: по одной записи на уникальный объект блокировки (таблица, строка и т.д.)" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="271.34000000000003" y="334" width="277.33" height="22" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-177" value="хэш-htable PROCLOCK: связь процесс ↔ блокировка" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="325.18" y="398" width="160" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-178" value="метаданные для каждой страницы в shared_buffers" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="323" y="466" width="150" height="10" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-179" value="позволяет управлять кэшем без хранения указателей на данные" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="315" y="505" width="190" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-180" value="кэш статусов транзакций (Committed/Aborted) из pg_xact/" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="322.5" y="414" width="165" height="12" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-181" value="ускоряет проверку видимости строк в MVCC" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="340" y="453" width="130" height="14" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-182" value="кэш информации о вложенных (sub) транзакциях" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="330.18" y="516" width="150" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-183" value="нужен для корректной видимости при использовании SAVEPOINT" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="310.18" y="554" width="190" height="16" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-184" value="глобальное состояние WAL:" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="360" y="575" width="90" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-185" value="используется WAL writer, backend’ами и WAL sender’ом" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="325.17999999999995" y="617" width="158.66" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-188" value="данные о слотах репликации (логических и физических):" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="315.18" y="643" width="180" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-189" value="предотвращает удаление нужных WAL-файлов" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="334.51" y="682" width="140" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-190" value="глобальное состояние autovacuum" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="354.51" y="700" width="100" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-191" value="структуры для сериализуемой изоляции (isolation = serializable)" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="315" y="760" width="190" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-194" value="отслеживают зависимости между транзакциями для предотвращения аномалий" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="289.51" y="800" width="230" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-195" value="массив структур для транзакций, находящихся в состоянии PREPARE" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="305.18" y="820" width="200" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-196" value="позволяет сохранять состояние распределённых транзакций после commit prepared" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="285.51" y="867" width="240" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-197" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;LWLocks&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="289.51" y="900" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-198" value="массив примитивных блокировок для синхронизации доступа к shared memory&#10;защищают: shared_buffers, WAL, ProcArray, CLOG и др." style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="290" y="880" width="230" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-199" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Control File (в памяти)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;" parent="1" vertex="1"><mxGeometry x="290.51" y="960" width="230" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-200" value="кэш системного файла pg_control" style="text;whiteSpace=wrap;fontSize=6;" parent="1" vertex="1"><mxGeometry x="350" y="945" width="100" height="20" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-202" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-55.29478293321612" y="164.59936923292273" width="235.91956586643224" height="39.491261534154546" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-207" value="" style="group" parent="DtyXQ3PAwa8L_bhxuvus-202" vertex="1" connectable="0"><mxGeometry width="235.91956586643224" height="39.491261534154546" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-119" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-207" source="DtyXQ3PAwa8L_bhxuvus-9" target="DtyXQ3PAwa8L_bhxuvus-48" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-154" value="сканирует грязные страницы для сброса на диск" style="text;whiteSpace=wrap;fontSize=10;rotation=2;" parent="DtyXQ3PAwa8L_bhxuvus-207" vertex="1"><mxGeometry x="0.47478293321611886" y="4.090630767077272" width="234.97" height="31.31" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-203" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-111.1702326471277" y="182.43128858829837" width="342.3404652942554" height="81.13742282340323" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-160" value="выбирает грязные страницы для постепенного сброса&#10;Уменьшает работу Checkpointer " style="text;whiteSpace=wrap;rotation=353;fontSize=10;" parent="DtyXQ3PAwa8L_bhxuvus-203" vertex="1"><mxGeometry x="1.1702326471277047" y="20.568711411701628" width="340" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-161" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-203" source="DtyXQ3PAwa8L_bhxuvus-11" target="DtyXQ3PAwa8L_bhxuvus-48" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-113.8297673528723" y="64.06871141170163" as="sourcePoint"/><mxPoint x="416.1702326471277" y="79.06871141170163" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-204" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-150.81624280035294" y="247.65189562471232" width="331.9324856007059" height="96.69620875057535" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-165" value="читает WAL-записи для асинхронного сброса на диск" style="text;whiteSpace=wrap;rotation=-10;fontSize=10;" parent="DtyXQ3PAwa8L_bhxuvus-204" vertex="1"><mxGeometry x="0.9662428003529442" y="28.348104375287676" width="330" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-205" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-134.53468181544636" y="394.7443485109333" width="279.36936363089274" height="206.5113029781333" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-169" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-205" source="DtyXQ3PAwa8L_bhxuvus-12" target="DtyXQ3PAwa8L_bhxuvus-50" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-55.46531818455364" y="48.75565148906668" as="sourcePoint"/><mxPoint x="474.53468181544633" y="-42.24434851093332" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-171" value="читает глобальный oldestXmin для расчёта freeze" style="text;whiteSpace=wrap;fontSize=10;rotation=326;" parent="DtyXQ3PAwa8L_bhxuvus-205" vertex="1"><mxGeometry x="-15.315318184553632" y="83.25565148906668" width="310" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-206" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="-121.32367233043684" y="652.3186734811588" width="302.64734466087367" height="81.36265303768232" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-166" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-206" source="DtyXQ3PAwa8L_bhxuvus-12" target="DtyXQ3PAwa8L_bhxuvus-98" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-68.67632766956316" y="-152.81867348115884" as="sourcePoint"/><mxPoint x="461.3236723304368" y="-243.81867348115884" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-168" value="управляет очередью таблиц, запускает worker’ы" style="text;whiteSpace=wrap;fontSize=10;rotation=8;" parent="DtyXQ3PAwa8L_bhxuvus-206" vertex="1"><mxGeometry x="1.3236723304368354" y="20.68132651884116" width="300" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-208" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="570" y="200.1794103818898" width="459.9966968467579" height="257.6411792362204" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-145" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-208" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-150" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="131.34000000000003" y="164.4605896181102" as="sourcePoint"/><mxPoint x="-29.999912692316343" y="279.82047762018743" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-149" value="управляет закреплением (pinning) и dirty-флагами страниц" style="text;whiteSpace=wrap;fontSize=10;rotation=321;" parent="DtyXQ3PAwa8L_bhxuvus-208" vertex="1"><mxGeometry x="-24" y="108.8205896181102" width="360" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-151" value="rw" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=0;strokeColor=#8E98A2;fontFamily=Helvetica;fontSize=13;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-208" vertex="1" connectable="0"><mxGeometry y="252.8205896181102" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-209" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="588.3683839652955" y="178.9768471162975" width="293.263232069409" height="222.046305767405" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-110" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-209" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-54" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-111" value="r" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=0;strokeColor=#8E98A2;fontFamily=Helvetica;fontSize=13;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-110" vertex="1" connectable="0"><mxGeometry x="0.2936" y="1" relative="1" as="geometry"><mxPoint x="-131" y="83" as="offset"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-139" value="читает статусы завершённых транзакций для MVCC" style="text;whiteSpace=wrap;fontSize=10;rotation=325;" parent="DtyXQ3PAwa8L_bhxuvus-209" vertex="1"><mxGeometry x="-18.368383965295493" y="91.0231528837025" width="330" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-210" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="586.0970280760375" y="116.21195544532812" width="337.80594384792494" height="173.5760891093438" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-108" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-210" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-50" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-109" value="rw" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=0;strokeColor=#8E98A2;fontFamily=Helvetica;fontSize=13;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-108" vertex="1" connectable="0"><mxGeometry x="0.3694" y="-1" relative="1" as="geometry"><mxPoint x="-116" y="47" as="offset"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-148" value="rw" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=0;strokeColor=#8E98A2;fontFamily=Helvetica;fontSize=13;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-108" vertex="1" connectable="0"><mxGeometry x="0.3694" y="-1" relative="1" as="geometry"><mxPoint x="-41" y="377" as="offset"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-138" value="регистрируется при старте, обновляет xmin/xid/snapshot" style="text;whiteSpace=wrap;fontSize=10;rotation=337;" parent="DtyXQ3PAwa8L_bhxuvus-210" vertex="1"><mxGeometry x="-6.097028076037532" y="66.78804455467188" width="350" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-211" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="579.4481607385584" y="138.44191532097796" width="231.10367852288323" height="109.11616935804409" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-105" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="DtyXQ3PAwa8L_bhxuvus-211" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-52" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="460.5518392614416" y="-18.441915320977955" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-106" value="w" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];rounded=0;strokeColor=#8E98A2;fontFamily=Helvetica;fontSize=13;fontColor=default;labelBackgroundColor=default;" parent="DtyXQ3PAwa8L_bhxuvus-105" vertex="1" connectable="0"><mxGeometry x="-0.1428" relative="1" as="geometry"><mxPoint x="-247" y="78" as="offset"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-137" value="пишет WAL-записи при изменениях" style="text;whiteSpace=wrap;rotation=342;fontSize=10;" parent="DtyXQ3PAwa8L_bhxuvus-211" vertex="1"><mxGeometry x="0.5518392614416143" y="34.558084679022045" width="230" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-212" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="600.7865994973627" y="48.3881505812775" width="348.4268010052747" height="129.223698837445" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-114" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;" parent="DtyXQ3PAwa8L_bhxuvus-212" source="DtyXQ3PAwa8L_bhxuvus-5" target="DtyXQ3PAwa8L_bhxuvus-48" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-220.78659949736266" y="211.6118494187225" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-115" value="rw" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" parent="DtyXQ3PAwa8L_bhxuvus-114" vertex="1" connectable="0"><mxGeometry x="0.3626" y="-1" relative="1" as="geometry"><mxPoint x="-73" y="21" as="offset"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-136" value="читает и изменяет страницы данных (таблиц, индексов)" style="text;whiteSpace=wrap;rotation=-15;fontSize=10;" parent="DtyXQ3PAwa8L_bhxuvus-212" vertex="1"><mxGeometry x="-0.7865994973626584" y="44.6118494187225" width="350" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-163" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#8E98A2;endArrow=none;endFill=0;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-10" target="DtyXQ3PAwa8L_bhxuvus-52" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-200" y="361.5" as="sourcePoint"/><mxPoint x="190" y="450" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-213" value="&lt;table class=&quot;qwen-markdown-table&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); min-width: 100%; border-spacing: 0px; line-height: 1.5rem; color: rgb(247, 248, 252); font-family: system-ui, ui-sans-serif, -apple-system, BlinkMacSystemFont, Inter, NotoSansHans, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: pre-line; background-color: rgb(35, 35, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;thead class=&quot;qwen-markdown-table-thead&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); background-color: rgb(46, 46, 51);&quot;&gt;&lt;tr class=&quot;qwen-markdown-table-thead-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;th scope=&quot;col&quot; class=&quot;qwen-markdown-table-thead-tr-th&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-thead-tr-th-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Элемент&lt;/span&gt;&lt;/div&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot; class=&quot;qwen-markdown-table-thead-tr-th&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-thead-tr-th-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Используется для&lt;/span&gt;&lt;/div&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody class=&quot;qwen-markdown-table-tbody&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;shared_buffers&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; + &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;Buffer Descriptors&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Кэширование данных, управление страницами&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i70.789b5171l17mid&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;ProcArray&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; + &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;CLOG&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; + &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;SUBTRANS&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;MVCC — видимость строк&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;Lock Manager&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; + &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;LWLocks&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Конкурентный доступ, изоляция&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;wal_buffers&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; + &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;XLogCtl&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Durability, восстановление, репликация&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 1px 0px; border-style: solid; border-color: rgb(227, 227, 227) rgb(46, 46, 51) rgb(46, 46, 51) rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;Replication slots&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: solid; border-right-style: initial; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: rgb(46, 46, 51); border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Безопасная логическая и физическая репликация&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;qwen-markdown-table-tbody-tr&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px 1px 0px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: rgb(46, 46, 51); border-bottom-color: initial; border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;AutoVacuumShmem&lt;/code&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&quot;qwen-markdown-table-tbody-tr-td&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i71.789b5171l17mid&quot; style=&quot;margin: 0px; padding: 0.5rem 0.75rem; box-sizing: border-box; border-width: 0px; border-top-style: solid; border-right-style: initial; border-bottom-style: initial; border-left-style: solid; border-top-color: rgb(227, 227, 227); border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(227, 227, 227); min-width: 11.25rem; font-size: 0.875rem;&quot;&gt;&lt;div class=&quot;qwen-markdown-table-tbody-tr-td-col&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i69.789b5171l17mid&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Автоматическая очистка мёртвых версий&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-91.33000000000001" y="1020" width="640" height="300" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-144" value="управляет сериализуемыми конфликтами (только при isolation = serializable)" style="text;whiteSpace=wrap;rotation=306;fontSize=10;" parent="1" vertex="1"><mxGeometry x="569.9966968467579" y="380.0013185736592" width="460" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-223" value="принимает соединение и порождает backend-процесс" style="text;whiteSpace=wrap;fontSize=14;" parent="1" vertex="1"><mxGeometry x="541.5" y="-90" width="208.5" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-288" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-225" target="DtyXQ3PAwa8L_bhxuvus-286" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-225" value="&lt;div&gt;При первом запросе (или BEGIN) backend&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Получает XID (идентификатор транзакции), если это не READ ONLY.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Формирует snapshot через GetTransactionSnapshot().&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Snapshot сохраняется в локальной памяти backend’а и ссылается на текущее состояние ProcArray.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div&gt;struct SnapshotData {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; TransactionId xmin;&amp;nbsp; &amp;nbsp; &amp;nbsp;// самые старые &quot;живые&quot; XID&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; TransactionId xmax;&amp;nbsp; &amp;nbsp; &amp;nbsp;// самый новый XID + 1&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; TransactionId *xip;&amp;nbsp; &amp;nbsp; &amp;nbsp;// массив активных XID на момент снимка&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; uint32&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; xcnt;&amp;nbsp; &amp;nbsp; &amp;nbsp;// их количество&lt;/div&gt;&lt;div&gt;}&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;//&amp;nbsp;Например: `xmin=990`, `xmax=1005`, `xip = [1000, 1002, 1004]`&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="1927" y="298" width="464" height="226" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-233" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-227" target="DtyXQ3PAwa8L_bhxuvus-235" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1322" y="454" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-227" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;font style=&quot;&quot;&gt;SQL п&lt;/font&gt;&lt;font style=&quot;&quot;&gt;ередаётся в parser&lt;/font&gt;&lt;/font&gt;&lt;div&gt;Результат: PlanState — исполняемое дерево&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1141" y="324" width="360" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-237" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-235" target="DtyXQ3PAwa8L_bhxuvus-236" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-235" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Executor запускает обход PlanState&lt;/span&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1"><mxGeometry x="1145.5" y="464" width="351" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-271" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-236" target="DtyXQ3PAwa8L_bhxuvus-270" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-236" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;Ищет страницу в shared_buffers&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1121" y="559.5" width="400" height="44.5" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-282" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-239" target="DtyXQ3PAwa8L_bhxuvus-256" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-239" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;По ItemPointer (TID) находит tuple в странице heap’а.&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1121" y="694" width="400" height="71.5" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-242" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-240" target="DtyXQ3PAwa8L_bhxuvus-241" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-240" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Проверка видимости tuple через MVCC&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1162" y="1144" width="320" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-246" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-241" target="DtyXQ3PAwa8L_bhxuvus-245" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-241" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;ol&gt;&lt;li data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i52.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i51.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Читает &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;t_xmin&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;, &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;t_xmax&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; из tuple.&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i52.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Сверяется с snapshot и ProcArray&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i55.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i56.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Если &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;t_xmin&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; в &lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;ProcArray&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; → строка &lt;/span&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;невидима&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; (транзакция активна).&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1162" y="1244" width="320" height="100" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-254" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-245" target="DtyXQ3PAwa8L_bhxuvus-253" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-245" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Если&amp;nbsp;&lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;t_xmin&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&amp;nbsp;не в&amp;nbsp;&lt;/span&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;ProcArray&lt;/code&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&amp;nbsp;→ читает&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i48.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;CLOG buffers&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&amp;nbsp;→ проверяет, зафиксирована ли транзакция.&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;fontSize=14;" parent="1" vertex="1"><mxGeometry x="1162" y="1364" width="320" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-248" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-270" target="DtyXQ3PAwa8L_bhxuvus-73" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="780" y="1000" as="sourcePoint"/><mxPoint x="588.19" y="1150" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-249" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;entryX=1;entryY=1;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-236" target="DtyXQ3PAwa8L_bhxuvus-48" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="895.9" y="700" as="sourcePoint"/><mxPoint x="704.09" y="850" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-251" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-240" target="DtyXQ3PAwa8L_bhxuvus-50" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="861.81" y="790" as="sourcePoint"/><mxPoint x="670" y="940" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-252" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="DtyXQ3PAwa8L_bhxuvus-54" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1120" y="1040" as="sourcePoint"/><mxPoint x="630" y="952" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-279" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-253" target="DtyXQ3PAwa8L_bhxuvus-274" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1323" y="1564"/><mxPoint x="1061" y="1564"/><mxPoint x="1061" y="1074"/></Array></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-253" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Решает: включать ли строку в результат&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1163" y="1464" width="320" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-256" value="&lt;div&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;AccessShareLock&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;на отношение через Lock Manager&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1121" y="824" width="400" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-261" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8E98A2;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=none;endFill=0;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-256" target="DtyXQ3PAwa8L_bhxuvus-51" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="890" y="1130" as="sourcePoint"/><mxPoint x="740" y="839.2307692307693" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-277" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="DtyXQ3PAwa8L_bhxuvus-274" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1322" y="954" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-268" value="&lt;ul style=&quot;&quot;&gt;&lt;li style=&quot;font-size: 16px; text-align: left;&quot;&gt;Совместима с другими SELECT и DML (INSERT/UPDATE/DELETE)&lt;/li&gt;&lt;li style=&quot;font-size: 16px; text-align: left;&quot;&gt;Конфликтует с DDL (ALTER, DROP).&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;блокирует отношение целиком (или страницу/строку)&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1121" y="894" width="400" height="110" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-272" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-270" target="DtyXQ3PAwa8L_bhxuvus-239" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-270" value="При промахе — вызывает smgrread() → читает с диска → загружает в shared_buffers." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1121" y="631" width="400" height="44.5" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-278" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-274" target="DtyXQ3PAwa8L_bhxuvus-240" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-281" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-274" target="DtyXQ3PAwa8L_bhxuvus-280" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1581" y="1074"/><mxPoint x="1581" y="1604"/><mxPoint x="1323" y="1604"/><mxPoint x="1323" y="1624"/></Array></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-274" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Scan&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 22px;&quot;&gt;Сканирование отоношения&lt;/span&gt;&lt;/div&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1121" y="1034" width="400" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-280" value="Результат" style="ellipse;whiteSpace=wrap;html=1;fontSize=22;" parent="1" vertex="1"><mxGeometry x="1201" y="1624" width="240" height="80" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-291" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-286" target="DtyXQ3PAwa8L_bhxuvus-289" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-286" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Parser → Analyzer → Planner&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1959.5" y="559.5" width="400" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-289" value="&lt;div&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;AccessShareLock&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;на отношение через Lock Manager&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1959.5" y="662.32" width="400" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-294" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-290" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="2159.4800000000005" y="860" as="targetPoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-290" value="&lt;div&gt;Backend запрашивает RowExclusiveLock на целевую таблицу через Lock Manager.&lt;/div&gt;&lt;div&gt;Эта блокировка совместима с SELECT (AccessShareLock), но конфликтует с DDL (ALTER, DROP).&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;Если UPDATE затрагивает индексы по уникальному ключу — может дополнительно брать ShareLock на индекс (для проверки уникальности).&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="1959.5" y="732.32" width="400" height="100" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-300" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-310" target="DtyXQ3PAwa8L_bhxuvus-298" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="2159" y="940" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-301" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-298" target="DtyXQ3PAwa8L_bhxuvus-299" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-298" value="Читается tuple&lt;div&gt;из heap-страницы (через shared_buffers).&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" parent="1" vertex="1"><mxGeometry x="1979" y="974" width="360" height="50" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-299" value="Применяется MVCC&lt;div&gt;проверка видимости (как в SELECT)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" parent="1" vertex="1"><mxGeometry x="1979" y="1060" width="360" height="50" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-304" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-302" target="DtyXQ3PAwa8L_bhxuvus-303" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-302" value="&lt;ul&gt;&lt;li&gt;Используется snapshot, ProcArray, CLOG buffers&lt;/li&gt;&lt;li&gt;Только видимые строки подлежат обновлению&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="1979" y="1110" width="360" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-307" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-303" target="DtyXQ3PAwa8L_bhxuvus-305" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-303" value="Heap Update" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=22;" parent="1" vertex="1"><mxGeometry x="2004.5" y="1180" width="310" height="60" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-308" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-305" target="DtyXQ3PAwa8L_bhxuvus-306" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-305" value="Пометка старой версии как удалённой" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" parent="1" vertex="1"><mxGeometry x="1979" y="1269" width="360" height="31" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-311" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-306" target="DtyXQ3PAwa8L_bhxuvus-309" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-306" value="Создание новой версии строки (MVCC-принцип)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" parent="1" vertex="1"><mxGeometry x="1979.5" y="1320" width="360" height="50" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-310" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Executor запускает сканирование&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1"><mxGeometry x="1959" y="860" width="400" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-315" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="2001" y="1630" width="320" height="140" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-312" value="&lt;span style=&quot;font-size: 22px;&quot;&gt;Page помечается как &quot;dirty&quot;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="DtyXQ3PAwa8L_bhxuvus-315" vertex="1"><mxGeometry width="320" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-314" value="&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Позже будет сброшена на диск&lt;/span&gt;&lt;br&gt;&lt;ul&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Background writer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; — постепенно,&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i119.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;Checkpointer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; — при checkpoint’е.&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="DtyXQ3PAwa8L_bhxuvus-315" vertex="1"><mxGeometry y="70" width="320" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-317" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-316" target="DtyXQ3PAwa8L_bhxuvus-312" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-318" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="2000.5" y="1400" width="320.5" height="210" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-309" value="&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 22px;&quot;&gt;Запись WAL (Write-Ahead Logging)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="DtyXQ3PAwa8L_bhxuvus-318" vertex="1"><mxGeometry width="320" height="70" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-316" value="&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Формируется WAL-запись, описывающая:&lt;/span&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;Изменение старого tuple (t_xmax, t_ctid),&lt;/li&gt;&lt;li&gt;Вставку нового tuple.&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;span class=&quot;qwen-markdown-text&quot; data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i117.789b5171bA98gv&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;WAL-запись помещается в &lt;/span&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; font-size: 0.875rem; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important; cursor: pointer;&quot;&gt;wal_buffers&lt;/code&gt;&lt;/span&gt;&lt;span class=&quot;qwen-markdown-text&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt; (в shared memory).&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;При commit (или асинхронно) — сбрасывается на диск (pg_wal/)&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="DtyXQ3PAwa8L_bhxuvus-318" vertex="1"><mxGeometry y="70" width="320.5" height="140" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-320" value="(если не HOT)" style="text;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="2040" y="1780" width="90" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-326" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1999.75" y="1820" width="321.25" height="180" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-321" value="Обновление индексов" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#eeeeee;strokeColor=#36393d;" parent="DtyXQ3PAwa8L_bhxuvus-326" vertex="1"><mxGeometry width="321" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-325" value="&lt;div&gt;Удаляется старая запись из индекса,&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Вставляется новая — с указанием TID новой версии строки.&lt;/li&gt;&lt;li&gt;Это также логируется в WAL.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="DtyXQ3PAwa8L_bhxuvus-326" vertex="1"><mxGeometry y="40" width="321.25" height="90" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-327" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-314" target="DtyXQ3PAwa8L_bhxuvus-321" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-331" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1999.75" y="1990" width="321.25" height="400" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-332" value="Завершение: COMMIT или продолжение транзакции" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#cdeb8b;strokeColor=#36393d;" parent="DtyXQ3PAwa8L_bhxuvus-331" vertex="1"><mxGeometry width="321" height="40" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-333" value="&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Пишет WAL-запись COMMIT,&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Вызывает XLogFlush() → гарантирует запись WAL на диск (если synchronous_commit = on),&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Удаляет свой XID из ProcArray.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;div&gt;Статус транзакции записывается в CLOG (на диске, кэшируется в CLOG buffers).&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Новые версии строк теперь видимы другим транзакциям.&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;Старые версии остаются — до тех пор, пока autovacuum не удалит их как &quot;мёртвые&quot;.&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="DtyXQ3PAwa8L_bhxuvus-331" vertex="1"><mxGeometry y="40" width="321.25" height="200" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-334" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DtyXQ3PAwa8L_bhxuvus-325" target="DtyXQ3PAwa8L_bhxuvus-332" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-336" value="&lt;div&gt;назначается XID&lt;/div&gt;&lt;div&gt;XID сохраняется в структуре PGPROC процесса в ProcArray&lt;/div&gt;&lt;div&gt;Snapshot создаётся&lt;/div&gt;&lt;div&gt;Parser → Analyzer → Planner&lt;/div&gt;&lt;div&gt;Запрос блокировки через Lock Manager&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Совместима с SELECT, но конфликтует с DDL (DROP, ALTER).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Если есть FOREIGN KEY — может брать RowShareLock на родительскую таблицу.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Если есть уникальные индексы — резервирует место в индексе (но проверка уникальности — позже).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;вставка новой строки (Heap Insert)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Система ищет страницу в таблице (relation) с достаточным свободным местом&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;Используется Free Space Map (FSM) — служебная структура на диске (_fsm файл), кэшируемая в shared_buffers&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Создаётся физическая строка (tuple) с:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;t_xmin = current XID,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;t_xmax = 0 (не удалена),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;t_ctid = (block, offset) — указывает сама на себя,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;t_infomask — флаги (например, HEAP_XMIN_COMMITTED устанавливается позже),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&#9;&lt;/span&gt;пользовательские данные.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Запись WAL (Write-Ahead Logging)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;До записи в память формируется WAL-запись:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Содержит: данные строки, TID, OID таблицы, флаги.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;WAL-запись помещается в wal_buffers (в shared memory).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Это гарантирует, что даже при сбое можно восстановить строку.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Запись в shared_buffers&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Новый tuple записывается в heap-страницу в shared_buffers.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Страница помечается как грязная (dirty).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#9;&lt;/span&gt;Обновляется FSM и Visibility Map (в памяти, с отложенной записью на диск).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Обновление индексов&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=default;fillColor=default;align=left;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="2558" y="298" width="464" height="490" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-338" value="Отправляет WAL записи по сети" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=7;" parent="1" vertex="1"><mxGeometry x="-413" y="457.82" width="190" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-340" value="пишет WAL записи в WAL buffet" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=7;" parent="1" vertex="1"><mxGeometry x="-413" y="298" width="190" height="30" as="geometry"/></mxCell><mxCell id="DtyXQ3PAwa8L_bhxuvus-342" value="копирует «старые»&amp;nbsp;WAL-файлы в архивное хранилище" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=7;" parent="1" vertex="1"><mxGeometry x="-413" y="380" width="190" height="30" as="geometry"/></mxCell><mxCell id="n7VCARtDQVuz1ElofBNG-3" value="Autovacuum worker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-320" y="680" width="80" height="40" as="geometry"/></mxCell><mxCell id="n7VCARtDQVuz1ElofBNG-6" value="&lt;div style=&quot;&quot;&gt;&lt;b&gt;ЕЩЕ подПРОЦЕССЫ&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;Logical replication launcher (начиная с PG 10)&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: justify;&quot;&gt;Запускается, если настроена логическая репликация.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Управляет логическими apply worker’ами (для подписок).&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;div&gt;Logical replication worker (начиная с PG 10)&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Apply worker: применяет изменения на подписчике (standby для логической репликации).&lt;/li&gt;&lt;li&gt;Table sync worker: синхронизирует таблицу при первом подключении подписки.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div&gt;Two-phase commit (2PC) recovery processes (условно)&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;При старте после сбоя, если есть незавершённые двухфазные транзакции (PREPARE TRANSACTION),&lt;/li&gt;&lt;li&gt;postmaster может запускать специальные recovery-процессы для их завершения.&lt;/li&gt;&lt;li&gt;Обычно не видны в обычной работе.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;div&gt;Parallel worker (условный процесс)&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Запускается на время выполнения запроса, если используется параллельное выполнение (max_parallel_workers_per_gather &amp;gt; 0).&lt;/li&gt;&lt;li&gt;Выполняет часть сканирования или агрегации.&lt;/li&gt;&lt;li&gt;В ps: postgres: parallel worker.&lt;/li&gt;&lt;li&gt;Завершается сразу после завершения запроса.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=top;rounded=0;" parent="1" vertex="1"><mxGeometry x="-810" y="257" width="360" height="420" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-6" value="..." style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" parent="1" vertex="1"><mxGeometry x="368" y="984" width="60" height="30" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GxawK6VliJsd9YzGtLEj-7" target="GxawK6VliJsd9YzGtLEj-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GxawK6VliJsd9YzGtLEj-7" target="GxawK6VliJsd9YzGtLEj-20" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-7" value="&lt;b&gt;Postmaster&lt;/b&gt;&lt;br&gt;&lt;div&gt;(main process)&lt;/div&gt;&lt;div&gt;Standby&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8B6F6C;fontColor=#ffffff;strokeColor=#6D1F00;fontSize=22;" parent="1" vertex="1"><mxGeometry x="-1290" y="-110" width="215.49" height="100" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-8" value="" style="shape=flexArrow;endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="GxawK6VliJsd9YzGtLEj-7" target="DtyXQ3PAwa8L_bhxuvus-4" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="-670" y="-30" as="sourcePoint"/><mxPoint x="-570" y="-130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-10" value="PostgreSQL использует Write-Ahead Logging (WAL) как основу репликации." style="text;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-610" y="-90" width="450" height="40" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-11" value="физическая потоковая репликация (streaming replication)" style="text;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-588" y="-55" width="350" height="40" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-13" value="Единственный активный процесс &#10;при запуске в режиме восстановления" style="text;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-1580" width="220" height="40" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="1" source="GxawK6VliJsd9YzGtLEj-14" target="GxawK6VliJsd9YzGtLEj-15" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-1520" y="90" as="sourcePoint"/><Array as="points"><mxPoint x="-1520" y="100"/><mxPoint x="-1520" y="100"/><mxPoint x="-1520" y="105"/></Array></mxGeometry></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-14" value="Startup process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;fontSize=14;" parent="1" vertex="1"><mxGeometry x="-1559" y="44.5" width="158" height="41" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-15" value="WAL receiver" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eeeeee;fontColor=default;strokeColor=#36393d;fontSize=14;align=center;verticalAlign=middle;fontFamily=Helvetica;" parent="1" vertex="1"><mxGeometry x="-1499" y="85.5" width="98" height="40" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-16" value="создаваемый startup, для &#10;приёма WAL по сети от primary." style="text;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="-1573" y="124.6" width="186" height="40" as="geometry"/></mxCell><mxCell id="GxawK6VliJsd9YzGtLEj-20" value="&lt;ul&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;Пользователь выполняет &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;UPDATE&lt;/code&gt; на Primary.&lt;/span&gt;&lt;br&gt;→ Генерируется WAL-запись → помещается в &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;wal_buffers&lt;/code&gt;.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;walwriter&lt;/code&gt;&lt;/span&gt; сбрасывает WAL на диск → &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;pg_wal/0000...&lt;/code&gt;.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;wal sender&lt;/code&gt;&lt;/span&gt; (на primary):&lt;/font&gt;&lt;ul class=&quot;qwen-markdown-list&quot; dir=&quot;auto&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 1.625em; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Отслеживает прогресс реплики через &lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;replication slot&lt;/span&gt; или LSN.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Читает новые WAL-записи (из &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;wal_buffers&lt;/code&gt; или &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;pg_wal/&lt;/code&gt;).&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Отправляет их по TCP реплике.&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;wal receiver&lt;/code&gt;&lt;/span&gt; (на standby):&lt;/font&gt;&lt;ul class=&quot;qwen-markdown-list&quot; dir=&quot;auto&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 1.625em; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Принимает WAL-записи.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Передаёт их &lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;startup&lt;/code&gt; процессу&lt;/span&gt;.&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;startup&lt;/code&gt; процесс&lt;/span&gt;:&lt;/font&gt;&lt;ul class=&quot;qwen-markdown-list&quot; dir=&quot;auto&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 1.625em; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227);&quot;&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;Распаковывает WAL-запись&lt;/span&gt; → узнаёт, какую страницу и как изменить.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Загружает страницу таблицы (например, &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;pg_class&lt;/code&gt;, &lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;my_table&lt;/code&gt;) в &lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;shared buffers&lt;/span&gt;.&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Применяет изменение (redo).&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Обновляет &lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;replay LSN&lt;/span&gt;.&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li data-spm-anchor-id=&quot;a2ty_o01.29997173.0.i134.1b785171mGnRXh&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); unicode-bidi: plaintext;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;Клиенты на standby&lt;/span&gt; могут читать данные через обычные бэкенд-процессы (&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;postgres: user db ...&lt;/code&gt;), но только в режиме &lt;span class=&quot;qwen-markdown-strong&quot; style=&quot;margin: 0px; padding: 0px; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); font-weight: 600;&quot;&gt;Hot Standby&lt;/span&gt; (&lt;code class=&quot;qwen-markdown-codespan&quot; style=&quot;margin: 0px; padding: 0px 0.25rem; box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(227, 227, 227); display: inline-block; line-height: 1.375rem; letter-spacing: -0.04em; color: rgb(133, 131, 246); border-radius: 0.25rem; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(42, 40, 92); word-break: break-word; cursor: pointer; font-family: ui-monospace, SFMono-Regular, &amp;quot;SF Mono&amp;quot;, Menlo, Consolas, &amp;quot;Liberation Mono&amp;quot;, monospace !important;&quot;&gt;hot_standby = on&lt;/code&gt;).&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;rounded=0;labelBorderColor=default;" parent="1" vertex="1"><mxGeometry x="-1387.25" y="44.5" width="410" height="512" as="geometry"/></mxCell></root></mxGraphModel>